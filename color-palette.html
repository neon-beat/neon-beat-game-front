<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>20 Distinct Colors - Spectrum Palette</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #ffffff;
      padding: 40px 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 1rem;
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #f7b731);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      text-align: center;
      color: #a0a0a0;
      margin-bottom: 3rem;
      font-size: 1.1rem;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 3rem;
      flex-wrap: wrap;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .control-group label {
      font-size: 0.9rem;
      color: #a0a0a0;
    }

    .control-group input {
      padding: 8px 16px;
      border-radius: 8px;
      border: 1px solid #444;
      background: #2a2a3e;
      color: #fff;
      font-size: 1rem;
      width: 200px;
    }

    .color-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 3rem;
    }

    .color-tile {
      background: #2a2a3e;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .color-tile:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5);
    }

    .color-swatch {
      width: 100%;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: bold;
      color: rgba(255, 255, 255, 0.9);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }

    .color-info {
      padding: 16px;
    }

    .color-name {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: #fff;
    }

    .color-values {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 0.85rem;
      color: #b0b0b0;
    }

    .color-value {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .color-value-label {
      font-weight: 500;
    }

    .color-value-code {
      font-family: 'Courier New', monospace;
      background: #1a1a2e;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .color-value-code:hover {
      background: #252540;
    }

    .copied-notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #4ecdc4;
      color: #1a1a2e;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.3s, transform 0.3s;
      pointer-events: none;
    }

    .copied-notification.show {
      opacity: 1;
      transform: translateY(0);
    }

    .palette-section {
      background: #2a2a3e;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 3rem;
      border: 2px solid transparent;
      transition: border-color 0.3s;
    }

    .palette-section:hover {
      border-color: #4ecdc4;
    }

    .palette-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
      gap: 16px;
    }

    .palette-title {
      font-size: 1.5rem;
      color: #4ecdc4;
      margin: 0;
    }

    .palette-controls {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      align-items: center;
    }

    .palette-control {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .palette-control label {
      font-size: 0.8rem;
      color: #a0a0a0;
    }

    .palette-control input[type="range"] {
      width: 120px;
    }

    .palette-control input[type="number"] {
      width: 80px;
      padding: 6px 10px;
    }

    .palette-control-value {
      font-size: 0.85rem;
      color: #fff;
      font-weight: 600;
    }

    .delete-palette-btn {
      background: #ff4757;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s;
    }

    .delete-palette-btn:hover {
      background: #ff3838;
    }

    .export-section {
      background: #2a2a3e;
      border-radius: 16px;
      padding: 24px;
      margin-top: 1rem;
    }

    .export-section h3 {
      margin-bottom: 0.75rem;
      color: #4ecdc4;
      font-size: 1.1rem;
    }

    .export-code {
      background: #1a1a2e;
      padding: 16px;
      border-radius: 8px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      line-height: 1.6;
      color: #a0a0a0;
      max-height: 200px;
    }

    .add-palette-btn {
      display: block;
      margin: 3rem auto;
      background: linear-gradient(45deg, #4ecdc4, #45b7d1);
      color: white;
      border: none;
      padding: 16px 32px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(78, 205, 196, 0.3);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .add-palette-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(78, 205, 196, 0.4);
    }

    .combined-view-section {
      background: #2a2a3e;
      border-radius: 16px;
      padding: 24px;
      margin: 3rem 0;
      border: 2px solid #f7b731;
    }

    .combined-view-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
      gap: 16px;
    }

    .combined-view-title {
      font-size: 1.8rem;
      color: #f7b731;
      margin: 0;
    }

    .view-combined-btn {
      background: linear-gradient(45deg, #f7b731, #ff5a00);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 4px 12px rgba(247, 183, 49, 0.3);
    }

    .view-combined-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(247, 183, 49, 0.4);
    }

    .combined-stats {
      display: flex;
      gap: 24px;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .stat-item {
      background: #1a1a2e;
      padding: 12px 20px;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .stat-label {
      font-size: 0.85rem;
      color: #a0a0a0;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #f7b731;
    }

    .combined-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      gap: 8px;
      margin-bottom: 1.5rem;
    }

    .combined-color-tile {
      aspect-ratio: 1;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
    }

    .combined-color-tile:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
      z-index: 10;
    }

    .combined-color-tile::after {
      content: attr(data-info);
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px;
      font-size: 0.7rem;
      text-align: center;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .combined-color-tile:hover::after {
      opacity: 1;
    }

    .hidden {
      display: none;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }

      .color-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
      }

      .color-swatch {
        height: 120px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>ðŸŽ¨ Color Spectrum Palette Generator</h1>
    <p class="subtitle">Create multiple color palettes with custom configurations</p>

    <div id="palettesContainer"></div>

    <button class="add-palette-btn" onclick="addNewPalette()">+ Add New Palette</button>

    <div class="combined-view-section hidden" id="combinedViewSection">
      <div class="combined-view-header">
        <h2 class="combined-view-title">ðŸŒˆ Combined Color View</h2>
        <button class="view-combined-btn" onclick="toggleCombinedView()">Hide</button>
      </div>
      <div class="combined-stats" id="combinedStats"></div>
      <div class="combined-grid" id="combinedGrid"></div>
      <div class="export-section">
        <h3>Export All Colors (Sorted)</h3>
        <pre class="export-code" id="combinedExportCode"></pre>
      </div>
    </div>

    <button class="add-palette-btn" onclick="toggleCombinedView()"
      style="background: linear-gradient(45deg, #f7b731, #ff5a00);">
      ðŸŒˆ View All Colors Combined
    </button>
  </div>

  <div class="copied-notification" id="copiedNotification">Copied to clipboard! âœ“</div>

  <script>
    const STORAGE_KEY = 'colorPalettes';
    let paletteIdCounter = 0;
    const palettes = new Map();

    /**
     * Save palettes to localStorage
     */
    function savePalettesToStorage() {
      const palettesArray = Array.from(palettes.entries()).map(([id, data]) => ({
        id,
        numberOfColors: data.numberOfColors,
        saturation: data.saturation,
        lightness: data.lightness
      }));

      const storageData = {
        paletteIdCounter,
        palettes: palettesArray
      };

      localStorage.setItem(STORAGE_KEY, JSON.stringify(storageData));
    }

    /**
     * Load palettes from localStorage
     */
    function loadPalettesFromStorage() {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (!stored) return false;

      try {
        const data = JSON.parse(stored);
        paletteIdCounter = data.paletteIdCounter || 0;

        if (data.palettes && data.palettes.length > 0) {
          data.palettes.forEach(palette => {
            createPaletteWithData(palette.id, palette.numberOfColors, palette.saturation, palette.lightness);
          });
          return true;
        }
      } catch (e) {
        console.error('Failed to load palettes from storage:', e);
      }

      return false;
    }

    /**
     * Convert HSL to Hex color
     */
    function hslToHex(h, s, l) {
      const sNorm = s / 100;
      const lNorm = l / 100;

      const c = (1 - Math.abs(2 * lNorm - 1)) * sNorm;
      const x = c * (1 - Math.abs(((h / 60) % 2) - 1));
      const m = lNorm - c / 2;

      let r = 0, g = 0, b = 0;

      if (h >= 0 && h < 60) {
        r = c; g = x; b = 0;
      } else if (h >= 60 && h < 120) {
        r = x; g = c; b = 0;
      } else if (h >= 120 && h < 180) {
        r = 0; g = c; b = x;
      } else if (h >= 180 && h < 240) {
        r = 0; g = x; b = c;
      } else if (h >= 240 && h < 300) {
        r = x; g = 0; b = c;
      } else if (h >= 300 && h < 360) {
        r = c; g = 0; b = x;
      }

      const rHex = Math.round((r + m) * 255).toString(16).padStart(2, '0');
      const gHex = Math.round((g + m) * 255).toString(16).padStart(2, '0');
      const bHex = Math.round((b + m) * 255).toString(16).padStart(2, '0');

      return `#${rHex}${gHex}${bHex}`;
    }

    /**
     * Generate distinct colors
     */
    function generateDistinctColors(numberOfColors, saturation = 70, lightness = 50) {
      const hueStep = 360 / numberOfColors;
      const colors = [];

      for (let i = 0; i < numberOfColors; i++) {
        const hue = Math.round(i * hueStep);
        const hsl = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
        const hex = hslToHex(hue, saturation, lightness);

        colors.push({
          index: i + 1,
          hue,
          hsl,
          hex
        });
      }

      return colors;
    }

    /**
     * Copy text to clipboard
     */
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        const notification = document.getElementById('copiedNotification');
        notification.classList.add('show');
        setTimeout(() => {
          notification.classList.remove('show');
        }, 2000);
      });
    }

    /**
     * Create a new palette section
     */
    function addNewPalette() {
      createPaletteWithData(++paletteIdCounter, 20, 70, 50);
      savePalettesToStorage();
    }

    /**
     * Create a palette with specific data (used for both new palettes and loading from storage)
     */
    function createPaletteWithData(paletteId, numberOfColors, saturation, lightness) {
      const container = document.getElementById('palettesContainer');

      const paletteSection = document.createElement('div');
      paletteSection.className = 'palette-section';
      paletteSection.id = `palette-${paletteId}`;

      paletteSection.innerHTML = `
        <div class="palette-header">
          <h2 class="palette-title">Palette ${paletteId}</h2>
          <div class="palette-controls">
            <div class="palette-control">
              <label>Number of Colors</label>
              <input type="number" id="colors-${paletteId}" min="2" max="100" value="${numberOfColors}" 
                     onchange="updatePalette(${paletteId})">
            </div>
            <div class="palette-control">
              <label>Saturation</label>
              <input type="range" id="saturation-${paletteId}" min="0" max="100" value="${saturation}" 
                     oninput="updatePalette(${paletteId})">
              <span class="palette-control-value" id="saturation-value-${paletteId}">${saturation}%</span>
            </div>
            <div class="palette-control">
              <label>Lightness</label>
              <input type="range" id="lightness-${paletteId}" min="0" max="100" value="${lightness}" 
                     oninput="updatePalette(${paletteId})">
              <span class="palette-control-value" id="lightness-value-${paletteId}">${lightness}%</span>
            </div>
            <button class="delete-palette-btn" onclick="deletePalette(${paletteId})">Delete</button>
          </div>
        </div>
        <div class="color-grid" id="color-grid-${paletteId}"></div>
        <div class="export-section">
          <h3>Export as Array</h3>
          <pre class="export-code" id="export-code-${paletteId}"></pre>
        </div>
      `;

      container.appendChild(paletteSection);

      // Store palette data
      palettes.set(paletteId, {
        numberOfColors,
        saturation,
        lightness
      });

      // Initial render
      updatePalette(paletteId);
    }

    /**
     * Update a specific palette
     */
    function updatePalette(paletteId) {
      const numberOfColors = parseInt(document.getElementById(`colors-${paletteId}`).value);
      const saturation = parseInt(document.getElementById(`saturation-${paletteId}`).value);
      const lightness = parseInt(document.getElementById(`lightness-${paletteId}`).value);

      // Update displayed values
      document.getElementById(`saturation-value-${paletteId}`).textContent = saturation + '%';
      document.getElementById(`lightness-value-${paletteId}`).textContent = lightness + '%';

      // Update palette title with color count
      const hueStep = Math.round(360 / numberOfColors);
      document.querySelector(`#palette-${paletteId} .palette-title`).textContent =
        `Palette ${paletteId} (${numberOfColors} colors â€¢ ${hueStep}Â° spacing)`;

      // Generate colors
      const colors = generateDistinctColors(numberOfColors, saturation, lightness);
      const grid = document.getElementById(`color-grid-${paletteId}`);
      const exportCode = document.getElementById(`export-code-${paletteId}`);

      grid.innerHTML = '';

      colors.forEach(color => {
        const tile = document.createElement('div');
        tile.className = 'color-tile';
        tile.innerHTML = `
          <div class="color-swatch" style="background: ${color.hex};">
            ${color.index}
          </div>
          <div class="color-info">
            <div class="color-name">Color ${color.index}</div>
            <div class="color-values">
              <div class="color-value">
                <span class="color-value-label">Hue:</span>
                <span class="color-value-code" onclick="copyToClipboard('${color.hue}Â°')">${color.hue}Â°</span>
              </div>
              <div class="color-value">
                <span class="color-value-label">HSL:</span>
                <span class="color-value-code" onclick="copyToClipboard('${color.hsl}')">${color.hsl}</span>
              </div>
              <div class="color-value">
                <span class="color-value-label">Hex:</span>
                <span class="color-value-code" onclick="copyToClipboard('${color.hex}')">${color.hex}</span>
              </div>
            </div>
          </div>
        `;
        grid.appendChild(tile);
      });

      // Update export code
      const hexArray = colors.map(c => c.hex);
      exportCode.textContent = JSON.stringify(hexArray, null, 2);

      // Store updated data
      palettes.set(paletteId, { numberOfColors, saturation, lightness, colors });

      // Save to localStorage
      savePalettesToStorage();
    }

    /**
     * Delete a palette
     */
    function deletePalette(paletteId) {
      const paletteElement = document.getElementById(`palette-${paletteId}`);
      if (paletteElement) {
        paletteElement.remove();
        palettes.delete(paletteId);
        savePalettesToStorage();
      }
    }

    /**
     * Toggle combined view of all colors
     */
    function toggleCombinedView() {
      const section = document.getElementById('combinedViewSection');
      const isHidden = section.classList.contains('hidden');

      if (isHidden) {
        updateCombinedView();
        section.classList.remove('hidden');
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } else {
        section.classList.add('hidden');
      }
    }

    /**
     * Update the combined view with all colors from all palettes
     */
    function updateCombinedView() {
      const allColors = [];

      // Collect all colors from all palettes
      palettes.forEach((paletteData, paletteId) => {
        if (paletteData.colors) {
          paletteData.colors.forEach(color => {
            allColors.push({
              ...color,
              paletteId,
              saturation: paletteData.saturation,
              lightness: paletteData.lightness
            });
          });
        }
      });

      // Sort by hue, then saturation, then lightness
      allColors.sort((a, b) => {
        if (a.hue !== b.hue) return a.hue - b.hue;
        if (a.saturation !== b.saturation) return a.saturation - b.saturation;
        return a.lightness - b.lightness;
      });

      // Update stats
      const statsContainer = document.getElementById('combinedStats');
      const uniqueHues = new Set(allColors.map(c => c.hue)).size;
      const uniqueHexes = new Set(allColors.map(c => c.hex)).size;

      statsContainer.innerHTML = `
        <div class="stat-item">
          <span class="stat-label">Total Colors</span>
          <span class="stat-value">${allColors.length}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Unique Colors</span>
          <span class="stat-value">${uniqueHexes}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Unique Hues</span>
          <span class="stat-value">${uniqueHues}</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">From Palettes</span>
          <span class="stat-value">${palettes.size}</span>
        </div>
      `;

      // Render combined grid
      const grid = document.getElementById('combinedGrid');
      grid.innerHTML = '';

      allColors.forEach((color, index) => {
        const tile = document.createElement('div');
        tile.className = 'combined-color-tile';
        tile.style.background = color.hex;
        tile.setAttribute('data-info', `${color.hex}`);
        tile.onclick = () => copyToClipboard(color.hex);
        grid.appendChild(tile);
      });

      // Update export code
      const exportCode = document.getElementById('combinedExportCode');
      const sortedHexArray = allColors.map(c => ({
        hex: c.hex,
        hsl: c.hsl,
        hue: c.hue,
        saturation: c.saturation,
        lightness: c.lightness,
        palette: c.paletteId
      }));
      exportCode.textContent = JSON.stringify(sortedHexArray, null, 2);
    }

    // Initialize: Load from storage or create default palette
    if (!loadPalettesFromStorage()) {
      addNewPalette();
    }
  </script>
</body>

</html>